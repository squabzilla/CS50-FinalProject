{% extends "layout.html" %}

{% block title %}Character Creator{% endblock %}

{% block header %}Character Creator{% endblock %}

{% block main %}
    <p>This is the character creator.</p>
    
    <!--{% if not new_pc.has_name %}-->
    {% if new_pc.creation_step==1 %}
        <p> We need a name </p>
        <form action="/character_creator" method="POST" class="form-control mx-auto w-auto">
            <input autocomplete="off" autofocus class="form-control w-auto" id="character_name" name="character_name" placeholder="Character Name" type="text" value="Bob" required="required">
            <button class="btn btn-primary" type="submit">Submit</button>
        </form>

    <!--{% elif not new_pc.has_race %}-->
    {% elif new_pc.creation_step==2 %}
        <p> We need a race </p>
        <form action="/character_creator" method="POST" class="form-control mx-auto w-auto">
            <select class="form-select" class="form-control w-auto" aria-label="Default select example" name="race_id" id="race_id">
            </select>
            <button class="btn btn-primary" type="submit">Submit</button>
        </form>
        <script type="module">
            let race_response = await fetch('/get_race_dropdown');
            let race_dropdown = await race_response.json();
            //console.log(race_dropdown)
            document.getElementById("race_id").insertAdjacentHTML("beforeend",race_dropdown)
        </script>

    <!--{% elif not new_pc.has_class %}-->
    {% elif new_pc.creation_step==3 %}
        <p> We need a class </p>
        <form action="/character_creator" method="POST" class="form-control mx-auto w-auto">
            <select class="form-select" class="form-control w-auto" aria-label="Default select example" name="class_id" id="class_id">
            </select>
            <button class="btn btn-primary" type="submit">Submit</button>
        </form>
        <script type="module">
            let class_response = await fetch('/get_class_dropdown');
            let class_dropdown = await class_response.json();
            console.log(class_dropdown)
            document.getElementById("class_id").insertAdjacentHTML("beforeend",class_dropdown)
        </script>

    <!--{% elif not new_pc.has_background %}-->
    {% elif new_pc.creation_step==4 %}
        <p> We need a background </p>
        <form action="/character_creator" method="POST" class="form-control mx-auto w-auto">
            <select class="form-select" class="form-control w-auto" aria-label="Default select example" name="background_id" id="background_id">
            </select>
            <button class="btn btn-primary" type="submit">Submit</button>
        </form>
        <script type="module">
            let background_response = await fetch('/get_background_dropdown');
            let background_dropdown = await background_response.json();
            document.getElementById("background_id").insertAdjacentHTML("beforeend",background_dropdown)
        </script>
    
    {% elif new_pc.creation_step==5 %}
    <!--{% elif not new_pc.has_features %}-->
    <h1>Features</h1>
    <div name="auto_features" id="auto_features">
    </div>
    <script type="module">
        let features_response = await fetch('/get_lvl1features');
        let features_items = await features_response.json();
        document.getElementById("auto_features").insertAdjacentHTML("beforeend",features_items)
    </script>


    <!--{% elif not new_pc.has_spells %}-->
    {% elif new_pc.creation_step==6 %}
        <p>Spells</p>
        <div name="features_go_here" id="features_go_here"></div>
        <div name="OLD_features_go_here" id="OLD_features_go_here">
        <!--
            <form action="/character_creator" method="POST" class="form-control mx-auto w-auto" name="SelectFeaturesForm" id="SelectFeaturesForm">
                <select class="form-select" class="form-control w-auto" aria-label="Default select example" name="SelectFeaturesSelect" id="SelectFeaturesSelect">
                </select>
                <button class="btn btn-primary" type="submit" form="SelectFeatures">Submit</button>
            </form>
        
        <form action="/character_creator" method="POST" class="form-control mx-auto w-auto">
            <select class="form-select" class="form-control w-auto" aria-label="Default select example" name="SelectFeaturesSelect" id="SelectFeaturesSelect">
            </select>
            <button class="btn btn-primary" type="submit">Submit</button>
        </form>
        -->
        </div>
        
        <script type="module">
            //let response = await fetch('/search?q=' + input.value);
            
            
            //let select_features_response = await fetch('/search?q=' + input.value);
            //let shows = await response.json();
            /*
            let features_response = await fetch('/get_lvl1features');
            let features_items = await features_response.json();
            document.getElementById("features_go_here").insertAdjacentHTML("beforeend",features_items)
            */
            //document.getElementById("SelectFeaturesForm").insertAdjacentHTML("beforeend",features_items)
            //document.getElementById("SelectFeaturesSelect").insertAdjacentHTML("beforeend",features_items)
            /*
            Okay, so this works so far, for now
            However, I still need to add a submit button
            As well as something that brings up the description of the fighting style selected
            Still, another step of noticeable progress done
            */
        </script>
        <script type="module">
        </script>
    {% else %}

    {% endif %}

{% endblock %}

{% block footer %}{% endblock %}